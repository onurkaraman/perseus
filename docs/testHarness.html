<!DOCTYPE html>  <html> <head>   <title>testHarness.py</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="astprint.html">                 astprint.py               </a>                                           <a class="source" href="helper.html">                 helper.py               </a>                                           <a class="source" href="lexer.html">                 lexer.py               </a>                                           <a class="source" href="nodes.html">                 nodes.py               </a>                                           <a class="source" href="pythonscript.html">                 pythonscript.py               </a>                                           <a class="source" href="testHarness.html">                 testHarness.py               </a>                                           <a class="source" href="typing.html">                 typing.py               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               testHarness.py             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="kn">import</span> <span class="nn">os</span>

<span class="k">def</span> <span class="nf">normalize</span><span class="p">(</span><span class="n">string</span><span class="p">):</span>
	<span class="k">return</span> <span class="s">&#39;&#39;</span><span class="o">.</span><span class="n">join</span><span class="p">(</span><span class="n">string</span><span class="o">.</span><span class="n">split</span><span class="p">())</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>

<span class="n">tests</span> <span class="o">=</span> <span class="p">[</span>
	<span class="s">&#39;&quot;hello, world!&quot;&#39;</span><span class="p">,</span>
	<span class="sd">&#39;&#39;&#39;[[1,2,    3],</span>
<span class="sd">			[3,4], [5]]&#39;&#39;&#39;</span><span class="p">,</span>
	<span class="s">&#39;3 ** 4&#39;</span><span class="p">,</span>
	<span class="s">&#39;&quot;tastychicken&quot;[4]&#39;</span><span class="p">,</span>
<span class="p">]</span>

<span class="n">i</span> <span class="o">=</span> <span class="mi">1</span>
<span class="k">for</span> <span class="n">test</span> <span class="ow">in</span> <span class="n">tests</span><span class="p">:</span>
	<span class="n">test</span> <span class="o">=</span> <span class="n">test</span><span class="o">.</span><span class="n">strip</span><span class="p">()</span>
	<span class="n">pythonCode</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;test.py&#39;</span><span class="p">,</span> <span class="s">&#39;w&#39;</span><span class="p">)</span>
	<span class="n">pythonCode</span><span class="o">.</span><span class="n">write</span><span class="p">(</span><span class="s">&#39;print &#39;</span> <span class="o">+</span> <span class="n">test</span><span class="p">)</span>
	<span class="n">pythonCode</span><span class="o">.</span><span class="n">close</span><span class="p">()</span>
	<span class="n">pythonValue</span> <span class="o">=</span> <span class="nb">str</span><span class="p">(</span><span class="nb">eval</span><span class="p">(</span><span class="n">test</span><span class="p">))</span>
	
	<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;python pythonscript.py &gt; test.js&#39;</span><span class="p">)</span>
	<span class="n">os</span><span class="o">.</span><span class="n">system</span><span class="p">(</span><span class="s">&#39;node test.js &gt; result.txt&#39;</span><span class="p">)</span>

	<span class="n">jsValue</span> <span class="o">=</span> <span class="nb">open</span><span class="p">(</span><span class="s">&#39;result.txt&#39;</span><span class="p">,</span> <span class="s">&#39;r&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>

	<span class="k">print</span><span class="p">(</span><span class="s">&quot;Test </span><span class="si">%i</span><span class="s">: &#39;</span><span class="si">%s</span><span class="s">&#39;&quot;</span><span class="p">)</span> <span class="o">%</span> <span class="p">(</span><span class="n">i</span><span class="p">,</span> <span class="n">test</span><span class="p">)</span>
	<span class="k">print</span> <span class="n">normalize</span><span class="p">(</span><span class="n">pythonValue</span><span class="p">)</span>
	<span class="k">print</span> <span class="n">normalize</span><span class="p">(</span><span class="n">jsValue</span><span class="p">)</span>
	<span class="k">if</span> <span class="p">(</span><span class="n">normalize</span><span class="p">(</span><span class="n">pythonValue</span><span class="p">)</span> <span class="o">==</span> <span class="n">normalize</span><span class="p">(</span><span class="n">jsValue</span><span class="p">)):</span>
		<span class="k">print</span> <span class="s">&#39;Pass&#39;</span>
	<span class="k">else</span><span class="p">:</span>
		<span class="k">print</span> <span class="s">&#39;Fail&#39;</span>
	<span class="k">print</span><span class="p">(</span><span class="s">&#39;&#39;</span><span class="p">)</span>

	<span class="n">i</span> <span class="o">+=</span> <span class="mi">1</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 